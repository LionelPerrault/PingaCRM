<div class="container">
  <main id="content" class="widget-login-container" role="main">
    <div class="row">
      <div class="col-xl-4 col-md-6 col-xs-10 col-xl-offset-4 col-md-offset-3 col-xs-offset-1">
        <h5 class="widget-login-logo animated fadeInUp">
          <i class="fa fa-circle text-gray"></i>
          Pinga CRM
          <i class="fa fa-circle text-warning"></i>
        </h5>
        <section class="widget widget-login animated fadeInUp">
          <header>
            <h3 class="text-xs-center">Set Password</h3>
          </header>
          <div class="widget-body">
            <form class="login-form mt-lg" [formGroup]="setPasswordForm" (ngSubmit)="setPassword(setPasswordForm.value)">
              <div class="widget-body">
                <div class="form-group row">
                  <div class="col-lg-12">
                    <div class="form-group">
                      <input type="text" [ngClass]="{'form-control':true,'inputNotValid':erStatus}" placeholder="Username" formControlName="userName" [(ngModel)]="userN"
                        name="userName">
                      <div *ngIf="submitted && !setPasswordForm.controls['userName'].valid || setPasswordForm.controls['userName'].touched && !setPasswordForm.controls['userName'].valid">
                        <span class="help-block" *ngIf="setPasswordForm.controls['userName'].hasError('required') ">Existing username is required</span>
                      </div>
                    </div>
                    <div class="form-group">
                      <input type="password" [ngClass]="{'form-control':true,'inputNotValid':erStatus}" placeholder="New Password" formControlName="newPassword"
                        name="newPassword">
                      <div *ngIf="submitted && !setPasswordForm.controls['newPassword'].valid || setPasswordForm.controls['newPassword'].touched && !setPasswordForm.controls['newPassword'].valid">
                        <span class="help-block" *ngIf="setPasswordForm.controls['newPassword'].hasError('required') ">New password is required</span>
                      </div>
                    </div>
                    <div class="form-group">
                      <input type="password" [ngClass]="{'form-control':true,'inputNotValid':erStatus}" placeholder="Confirm New Password" formControlName="confirmNewPassword"
                        name="confirmNewPassword" (blur)="matchPassword(setPasswordForm.value)">
                      <div *ngIf="submitted && !setPasswordForm.controls['confirmNewPassword'].valid || setPasswordForm.controls['confirmNewPassword'].touched && !setPasswordForm.controls['confirmNewPassword'].valid">
                        <span class="help-block" *ngIf="setPasswordForm.controls['confirmNewPassword'].hasError('required') ">Confirm password is required</span>
                      </div>
                    </div>

                    <div *ngIf="submitted && passwordNotMatch || passwordNotMatch">
                      <span class="help-block">New password and Confirm password does not match</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="clearfix">
                <div class="btn-toolbar m-t-0">
                  <button type="submit" class="btn btn-inverse btn-sm btn-special display-block m-t-0 m-b-1" id="success-info">Submit</button>
                  <button type="reset" class="btn btn-inverse btn-sm btn-inverse display-block" [routerLink]="['login']">Reset</button>
                </div>
              </div>
            </form>
          </div>
        </section>
      </div>
    </div>
  </main>
</div>

<ul class="messenger messenger-fixed messenger-on-bottom messenger-on-right messenger-theme-air" [@animateOnAction]="bindVar" style="opacity: 0;" (@animateOnAction.done)="animEnd()">
  <li class="messenger-message-slot messenger-shown messenger-first messenger-last">
    <div [ngClass]="(classStatus=='fail')?'messenger-message message alert error message-error alert-error messenger--retry-soon':'messenger-message message alert success message-success alert-success messenger-will-hide-after'">
          <div *ngIf="setPasswordStatus == 'success'" class="messenger-message-inner">Password changed successfully.</div>
          <div *ngIf="setPasswordStatus == 'fail'" class="messenger-message-inner">{{failureResponse}}</div>
    </div>
  </li>
</ul>
